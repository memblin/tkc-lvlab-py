---
environment:
  - name: libvirt-salt-dev
    config_defaults:
      domain: local
      os: debian12
      cpu: 2
      memory: 2048
      disk: 25G
      user: root
      privkey: ~/.ssh/id_ed25519_development.pub
      pubkey: ~/.ssh/id_ed25519_development
      interfaces:
          network: default
      cloud_image_basedir: /tmp
      disk_image_basedir: /tmp
      shared_directories:
        # requires mounting in guest like:
        # mount -t virtiofs gitrepos /srv/git
        - source: /home/crow/repos
          mount_tag: gitrepos
    machines:
      - hostname: salt
        os: debian12
        interfaces:
          - name: enp1s0
            ip4: 192.168.122.12/24
            ip4gw: 192.168.122.1
      - hostname: vault
        os: fedora40
        interfaces:
          - name: eth0
            ip4: 192.168.122.16/24
            ip4gw: 192.168.122.1
      - hostname: ghar.local
        os: fedora40
        interfaces:
          - name: eth0
            ip4: 192.168.122.17/24
            ip4gw: 192.168.122.1

images:
  - name: fedora40
    image_url: https://download.fedoraproject.org/pub/fedora/linux/releases/40/Cloud/x86_64/images/Fedora-Cloud-Base-Generic.x86_64-40-1.14.qcow2
    checksum_url: https://download.fedoraproject.org/pub/fedora/linux/releases/40/Cloud/x86_64/images/Fedora-Cloud-40-1.14-x86_64-CHECKSUM
    checksum_type: sha256
    checksum_url_gpg: https://fedoraproject.org/fedora.gpg
    network_version: 2
  - name: debian12
    image_url: https://cloud.debian.org/images/cloud/bookworm/20240717-1811/debian-12-generic-amd64-20240717-1811.qcow2
    checksum_url: https://cloud.debian.org/images/cloud/bookworm/20240717-1811/SHA512SUMS
    checksum_type: sha512
    network_version: 2
